<%@ page import="java.util.*, Dao.*, Servlets.*" %>
	     	<%
	     	UsuarioDAO dao = new UsuarioDAO();
	     	Usuario usuario;
	     	int idUsuario = 0;
	     	System.out.println(request.getParameter("idusuario"));
	     	if(request.getParameter("idusuario") != null){
	     		idUsuario = Integer.parseInt(request.getParameter("idusuario"));
	     		System.out.println(idUsuario);
	     	}
	     	usuario = dao.getUsuario(idUsuario);
	     	
	     	String nome = usuario.getNomeUsuario();
	     	
	     	TipoDAO tdao = new TipoDAO();
	     	Tipo objTipo = tdao.getTipo(usuario.getIdTipo());
	     		     		     	
	     	double custoDiaria = usuario.getValorMax();
	     	int finalidade = usuario.getIdFinalidade();
	     	int regiao = usuario.getIdRegiao();
	     	int classificacao = usuario.getIdClassificacao();
	     	int tipo = usuario.getIdTipo();
	     	
	     	FinalidadeDAO fdao = new FinalidadeDAO();
	     	Finalidade objFinalidade = fdao.getFinalidade(finalidade);
	     	
	     	RegiaoDAO regDAO = new RegiaoDAO();
	     	Regiao objRegiao = regDAO.getRegiao(regiao);
	     	
	     	ClassificacaoDAO cdao = new ClassificacaoDAO();
	     	Classificacao objClassificacao = cdao.getclassificacao(classificacao);
	     	
	     	Servico_has_UsuarioDAO shudao2 = new Servico_has_UsuarioDAO();
	     	List<Servico_has_Usuario> shusLista = shudao2.getListaRelacionada(idUsuario);
	     	
	     	SitioTuristico_has_UsuarioDAO sthudao = new SitioTuristico_has_UsuarioDAO();
	     	List<SitioTuristico_has_Usuario> sthuLista = sthudao.getListaRelacionada(idUsuario);
	     	
			int contador = 0;
	     	int contador2 = 0;
	     	boolean encontrou = false;
	     	
	     	SitioTuristicoDAO stDAO = new SitioTuristicoDAO();
			List<SitioTuristico> sts = stDAO.getLista();
			for (SitioTuristico st : sts){
				for (SitioTuristico_has_Usuario sthu : sthuLista){
					if(sthu.getIdSitioTuristico() == st.getIdSitioTuristico()){
						encontrou = true;
						break;
					}
				}
				if(encontrou==true){
				%>
					<input type="checkbox" name="sitioTuristico<%=contador2 %>" value="<%=st.getIdSitioTuristico() %>"  checked >
					<%
						System.out.println("sitioTuristico"+contador2);
						contador2++; 
					%>
				<%
				}else if (encontrou==false){%>
					<input type="checkbox" name="sitioTuristico<%=contador2 %>" value="<%=st.getIdSitioTuristico() %>">
					<%
						System.out.println("sitioTuristico"+contador2);
						contador2++; 
					%> 
				<%
				}
				encontrou=false;
			}
			
			ServicoDAO servDAO = new ServicoDAO();
			List<Servico> servs = servDAO.getLista();
			for (Servico serv : servs){
				for (Servico_has_Usuario shu : shusLista){
					if(shu.getIdServico() == serv.getIdServico()){
						encontrou=true;
						break;
					}
				}
				if(encontrou==true){
				%>
					<input type="checkbox" name="servico<%=contador %>" value="<%=serv.getIdServico() %>" checked>
					<%
						System.out.println("servico"+contador);	
						contador++; 
					%>
				<%
				}else if (encontrou==false){
				%>
					<input type="checkbox" name="servico<%=contador %>" value="<%=serv.getIdServico() %>">
					<%
						System.out.println("servico"+contador);	
						contador++; 
					%>
				<%
				}
				encontrou = false;
			}	     	
	     	%>
	<html>
	     <body>
	     	<form action="exibe_mapaHoteis.jsp">       
			<h1>Buscar hotéis compatíveis com <%=usuario.getNomeUsuario() %>:</h1>
			<input type="submit" value="Buscar" />
			
			<input type="hidden" name="classificacao" value="<%=classificacao %>"/>
			<input type="hidden" name="tipo" value="<%=tipo %>"/>
			<input type="hidden" name="regiao" value="<%=regiao %>"/>
			<input type="hidden" name="finalidade" value="<%=finalidade %>"/>
			<input type="hidden" name="idUsuario" value="<%=idUsuario %>"/>
	      	<input type="hidden" name="custoDiaria" value="<%=custoDiaria %>"/>
	      	<input type="hidden" name="contador" value="<%=contador %>"/>
	      	<input type="hidden" name="contador2" value="<%=contador2 %>"/>
	      	<input type="hidden" name="nome" value="<%=nome %>"/>
			</form>
	     	<form action="edita_usuario.jsp">
	     	<h2>Informações do Usuário:</h2>
	     	<table cellspacing="1" cellpadding="1" border="3"> 
	     	<tr>

	     	<td><center>Nome:</center></td>
	     	<td><%= usuario.getNomeUsuario()%></td>
	     	</tr>
	     	<tr>
	     	<td><center>Custo da Diária desejado: </center></td>
	     	<td>R$ <%= usuario.getValorMax() %></td>
	     	</tr>
	     	<tr>
	     	<td><center>Finalidade:</center></td>
			<td> <%=objFinalidade.getDescricao() %> </td>
			</tr>
			<tr>
	     	<td><center>Região:</center></td>
			<td> <%=objRegiao.getDescricao() %> </td>
			</tr>
			<tr>
	     	<td><center>Classificação:</center></td>
			<td> <%=objClassificacao.getDescricao() %> </td>
			</tr>
			<tr>
	     	<td><center>Tipo:</center></td>
			<td> <%=objTipo.getDescricao() %> </td>
			</tr>
			</table>
	      	<br>
	      	<br>
	      	<input type="hidden" name="idUsuario" value="<%=idUsuario %>"/>
	      	<input type="hidden" name="idTipo" value="<%=tipo %>"/>       
	      	<input type="hidden" name="idregiao" value="<%=regiao %>"/>
	      	<input type="hidden" name="idfinalidade" value="<%=finalidade %>"/>
	      	<input type="hidden" name="custoDiaria" value="<%=custoDiaria %>"/>
	      	<input type="hidden" name="idclassificacao" value="<%=classificacao %>"/>
	      	<input type="hidden" name="nome" value="<%=nome %>"/>
	      	<input type="submit" value="Editar" />		
			
			</form>
			
			<form action="edita_shu.jsp">
	     	<h2>Serviços desejados pelo usuário:</h2>
	     	<table cellspacing="1" cellpadding="1" border="3"> 
	     	<tr>
	     	<%
	     	Servico_has_UsuarioDAO shudao = new Servico_has_UsuarioDAO();
	     	List<Servico> servicos = shudao.getServicos(idUsuario);
	     	
	     	for(Servico s : servicos){	     	
	     	%>
	     	<td><%= s.getNomeServico()%></td>
	     	</tr>
	     	<%
	     	}
	     	%></table>
	      	<br>
	      	<br>
	      	
	      	<input type="hidden" name="idUsuario" value="<%=idUsuario %>"/>
	      	<input type="submit" value="Editar" />		
			
			</form>
			
			<form action="edita_sthu.jsp">
	     	<h2>Pontos Turísticos desejados:</h2>
	     	<table cellspacing="1" cellpadding="1" border="3"> 
	     	<tr>
	     	<%
	     	SitioTuristico_has_UsuarioDAO sthu = new SitioTuristico_has_UsuarioDAO();
	     	List<SitioTuristico> sitios = sthu.getSitios(idUsuario);
	     	System.out.println("Tamanho da lista de siios: " + sitios.size());
	     	
	     	for(SitioTuristico s : sitios){	     	
	     	%>
	     	<td><%= s.getNomeSitio()%></td>
	     	</tr>
	     	<%
	     	}
	     	%></table>
	      	<br>
	      	<br>
	      	<input type="hidden" name="idusuario" value="<%=idUsuario %>"/>
	      	<input type="submit" value="Editar" />		
			
			</form>			
                   
	     	</body>
   </html>
